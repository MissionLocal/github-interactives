<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Police shooting in San Francisco</title>
        <meta charset="UTF-8">
        <meta name="description" content="All the drag performances in the competition at Pride.">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="images/favicon.jpg">

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;500&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="styles.css">


    <body>
        <div class="everything">
            <div class="container">
                <div class="row">
                    <div class="col-4@sm col-5@md">
                        <div class="filters-group">
                            <label for="filters-search-input" class="filter-label">Search</label>
                            <input class="textfield filter__search js-shuffle-search" type="search" id="filters-search-input" />
                        </div>
                    </div>
                </div>
            </div>

            <div class="container">
                <div id="grid" class="row my-shuffle-container">
                </div>
            </div>

          <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/Shuffle/6.0.0/shuffle.min.js" integrity="sha512-fN+YeX/572qBnWu5Axj90DDyKjSNUfvR+8OaFkz27xnr+QE50vZHefJ+bplRrM284a8cJgMLxEipmKshf8vrug==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

        <script>

          // define data
          data = {"name":{"0":"Idriss Stelley","1":"Randall \"Nice\" Smith","2":"Rodney \"Lucky\" Stevenson","3":"Gregory Hooper","4":"TK","5":"Richard Tims","6":"Robert Ruffin","7":"TK","8":"Jihad Alim Akbar","9":"Michael Moll","10":"Jerry Tan","11":"Paul Dean","12":"Cammerin Boyd","13":"Gustavus J. Rugley","14":"Wildfredo Gonzalez","15":"Asa Sullivan","16":"Oliver \"Big O\" Lefiti"},"officer":{"0":"shot by several officers","1":"shot by officers Angela Rodriquez and Michael Wolf","2":"TK","3":"shot by Steve Lee","4":"TK","5":"shot by five officers","6":"TK","7":"TK","8":"shot by officer Michael Celis","9":"shot by officers Gregory Pak and Reginald Scott","10":"TK","11":"TK","12":"shot by officer Timothy Paine","13":"shot by several officers","14":"shot himself","15":"shot by officers John Keesor and Michelle Alvis","16":"TK"},"race":{"0":"Black","1":"white","2":"TK","3":"Black","4":"TK","5":"Black","6":"Black","7":"TK","8":"Black","9":"white","10":"Asian","11":"TK","12":"TK","13":"Black","14":"Latinx","15":"Latinx","16":"Black"},"age":{"0":"23","1":"33","2":"38","3":"37","4":"TK","5":"35","6":"57","7":"TK","8":"28","9":"18","10":"28","11":"32","12":"29","13":"21","14":"38","15":"25","16":"36"},"gender":{"0":"man","1":"man","2":"man","3":"man","4":"TK","5":"man","6":"man","7":"TK","8":"man","9":"man","10":"man","11":"man","12":"man","13":"man","14":"man","15":"man","16":"man"},"victim_weapon":{"0":"knife","1":"gun","2":"gun","3":"none","4":null,"5":"knife","6":"knife","7":null,"8":"knife","9":"car","10":"car","11":"car","12":"gun","13":"gun","14":null,"15":"none","16":"car"},"long_date":{"0":"Wednesday, June 13, 2001","1":"Thursday, November 1, 2001","2":"Tuesday, July 10, 2001","3":"Saturday, February 2, 2002","4":"Saturday, February 9, 2002","5":"Friday, March 15, 2002","6":"Friday, June 14, 2002","7":"Saturday, December 7, 2002","8":"Tuesday, October 8, 2002","9":"Wednesday, February 19, 2003","10":"Saturday, November 16, 2002","11":"Tuesday, March 30, 2004","12":"Wednesday, May 5, 2004","13":"Tuesday, June 29, 2004","14":"Thursday, June 16, 2005","15":"Tuesday, June 6, 2006","16":"Saturday, June 24, 2006"},"time":{"0":"11:23 p.m.","1":"5:16 a.m.","2":"7:06 p.m.","3":"3:44 p.m.","4":"1:00 p.m.","5":"10:00 p.m.","6":"9:38 p.m.","7":"12:34 p.m.","8":"10:10 p.m.","9":"3:43 p.m.","10":"10:40 p.m.","11":"1:55 p.m.","12":"8:05 p.m.","13":"6:20 p.m.","14":"11:00 a.m.","15":"9:15 p.m.","16":"5:55 p.m."},"year":{"0":2001,"1":2001,"2":2001,"3":2002,"4":2002,"5":2002,"6":2002,"7":2002,"8":2002,"9":2003,"10":2003,"11":2004,"12":2004,"13":2004,"14":2005,"15":2006,"16":2006},"location":{"0":"101 4th Street","1":"Aquatic Park","2":"330 Ellis Street","3":"900 Kearny Street","4":"South San Francisco","5":"Geneva and Mission Streets","6":"238 Eddy Street","7":"857 Bryant Street","8":"2295 Market Street","9":"19th Avenue and Taraval Street","10":"Montgomery Street and Pacific Avenue","11":"King Street and Division Street","12":"the 600 block of Larch Street","13":"Alemany Boulevard and Justin Drive","14":"Vacaville","15":"Park Merced Complex","16":"Capp Street, between 15th and 16th Streets"},"new_desc":{"0":"At a movie theater, Stelley pulled out a knife and told everyone to leave, including his girlfriend.<br \/><br \/>Police were called. When Stelley approached officers with his knife, they shot him at least 20 times. One officer was injured by a ricocheting bullet. The city denied wrongdoing in Stelley's death but paid his mother $500,000 to settle out of court.","1":"Smith was allegedly stealing construction equipment. When spotted by police, he got into in a Dodge Durango with his wife and an accomplice.<br \/><br \/>Smith shot at officers with a pistol and drove into the officers' car. Officers shot and killed him.","2":"Officers gave chase after Stevenson robbed the Hilton Hotel and a taxi on Turk Street. On the fire escape of the Glide Memorial United Methodist Church, Stevenson allegedly brandished a gun.<br \/><br \/>An officer shot him several times with a rifle.","3":"Hooper tried to sell jewelry to off-duty officer Steve Lee. Lee turned him down, identified himself as a cop, and began to walk away.<br \/><br \/>Hooper attacked Lee, beating him up and hitting his head against a car. Hooper then backed away, and Lee shot him four times.","4":"TK","5":"Tims stabbed a 16-year-old after getting into a fight with him on a Muni bus. Officers were called and told Tims to drop the knife.<br \/><br \/>Officers pepper-sprayed Tims and then shot him when he lunged. Bystander Vilda Curry was accidentally shot in the stomach by officers.","6":"Ruffin was walking around his residence, the Drake Hotel, naked and holding a knife. Officers confronted Ruffin in a stairway and told him to drop the knife. They hit him with batons and pepper spray, and opened fire when Ruffin stabbed an officer in the forearm.","7":"TK","8":"Akbar took two knives from the Bagdad Caf\u00e9 kitchen and began waving them above his head, allegedly shouting about homosexuals.<br \/><br \/>When police arrived, he ran towards them and was shot. Akbar's domestic partner Tim Silard later filed an unsuccessful wrongful death lawsuit against the city.","9":"Two plainclothes police officers saw Moll driving erratically and ordered Moll and a passenger to leave their car (a stolen Honda Civic). Moll then reversed into the officers' unmarked police car, pinning the officer who was standing behind it. The officers shot Moll five times.","10":"Tan was driving erratically in a stolen Toyota Land Cruiser and did not pull over for officers. He crashed the car and reversed when officers approached. One officer shot at the car nine times. After a car chase, an officer tried and failed to pull Tan out of the car, after which a second officer opened fire. Tan was hit once and died.","11":"Dean was pulled over in a stolen SUV for a seat belt violation before fleeing in the car. The police pursuit was quickly called off for being too risky, but a motorcycle officer continued the chase. Once the car stopped, it then reversed towards the officer, who shot and killed Dean.","12":"Police tried to pull Boyd over on suspicion of attempted kidnapping, triggering a chase. Police say Boyd shot at them during the chase, and that he was reaching for a gun when officers shot and killed him. Boyd's family unsuccessfully sued the city over his death, arguing that he had been trying to surrender when he was killed.","13":"Officers tried to apprehend Rugley, who was wanted for attempted murder, as he came out of his house. He allegedly tried to escape in his SUV, exchanging shots with police and ramming a car. He was shot 36 times.","14":"TK","15":"Officers responded to a call about squatters in Park Merced Complex, where Sullivan was concealing himself in an attic. When found, he allegedly told officers that they should kill him or he would kill them. When Sullivan \"moved suddenly,\" they shot and killed him. He was unarmed. Sullivan's family lost a lawsuit that accused officers of illegal entry and excessive force.","16":"Two officers approached Lefiti, guns drawn, while he sat in a stolen car that had allegedly been used for drug dealing. Lefiti drove at one of the officers, who shot and killed him. Lefiti's family later complained to the police commission that they had not been contacted about his death."},"news_link_1":{"0":"https:\/\/www.sfgate.com\/news\/article\/Death-at-Metreon-Cops-shoot-S-F-man-who-they-2910977.php","1":"https:\/\/www.sfgate.com\/crime\/article\/Wife-of-man-killed-in-S-F-gunfight-held-2861438.php","2":"https:\/\/www.sfgate.com\/news\/article\/SAN-FRANCISCO-Man-killed-by-police-may-have-had-2899235.php","3":"https:\/\/www.sfgate.com\/news\/article\/Eye-witness-accounts-vary-in-shooting-Dispute-2865860.php","4":"TK","5":"https:\/\/www.sfgate.com\/news\/article\/SAN-FRANCISCO-Man-killed-by-police-is-identified-2863390.php","6":"https:\/\/www.sfgate.com\/health\/article\/The-Use-of-Force-Police-need-greater-2465821.php","7":"TK","8":"https:\/\/www.sfgate.com\/health\/article\/Oakland-man-killed-by-S-F-cops-had-troubled-past-2786521.php","9":"https:\/\/www.sfgate.com\/crime\/article\/Police-defend-killing-of-youth-his-parents-2668500.php","10":"https:\/\/www.sfgate.com\/bayarea\/article\/SAN-FRANCISCO-Driver-killed-by-police-was-on-2716002.php","11":"https:\/\/www.sfgate.com\/bayarea\/article\/SAN-FRANCISCO-Cop-who-killed-suspect-not-told-2772563.php","12":"https:\/\/www.sfgate.com\/bayarea\/article\/Jury-clears-S-F-police-of-wrongdoing-in-man-s-2501616.php","13":"https:\/\/www.sfgate.com\/bayarea\/article\/SAN-FRANCISCO-Police-kill-suspect-in-street-2710737.php","14":"https:\/\/www.sfgate.com\/bayarea\/article\/VACAVILLE-Suspended-officer-shot-and-killed-self-2627215.php","15":"https:\/\/www.sfgate.com\/bayarea\/article\/Family-of-man-killed-by-S-F-police-loses-lawsuit-5810235.php","16":"https:\/\/www.sfgate.com\/news\/article\/S-F-police-shoot-seriously-wound-drug-suspect-3326754.php"},"news_link_2":{"0":"https:\/\/www.sfgate.com\/news\/article\/The-Use-of-Force-In-a-darkened-theater-911-2483518.php","1":"https:\/\/www.sfgate.com\/bayarea\/article\/THE-BADGE-She-carries-a-gun-and-isn-t-afraid-2593157.php","2":"TK","3":"TK","4":"TK","5":"TK","6":"TK","7":"TK","8":"https:\/\/www.sfgate.com\/opinion\/article\/BAGDAD-CAFE-KILLING-A-Year-Later-the-Cops-Wall-2571528.php","9":"TK","10":"TK","11":"TK","12":"TK","13":"TK","14":"TK","15":"TK","16":"https:\/\/www.indybay.org\/newsitems\/2006\/07\/12\/18287215.php?show_comments=1"},"photo_path":{"0":"placeholder.png","1":"placeholder.png","2":"placeholder.png","3":"placeholder.png","4":"placeholder.png","5":"placeholder.png","6":"placeholder.png","7":"placeholder.png","8":"placeholder.png","9":"placeholder.png","10":"placeholder.png","11":"placeholder.png","12":"placeholder.png","13":"placeholder.png","14":"placeholder.png","15":"placeholder.png","16":"placeholder.png"}}

          const output = [];
          var count = 0;

          // create html slides
          for (var row = 0; row < Object.keys(data.age).length; row++) {
            output.push(`<div id="popup${count}" class="modal" role="dialog" tabindex="-1">
                      <div class="model-inner">
                        <div class="modal-header">
                          <h3>${data.name[row]}</h3>
                          <p class="modal-close" data-id="popup${count}" aria-label="Close">
                            Close
                          </p>
                        </div>
                        <p>
                          ${data.name[row]}, a ${data.age[row]}-year-old ${data.race[row]} ${data.gender[row]}, died on ${data.long_date[row]}. He was shot at ${data.time[row]} at ${data.location[row]}.
                        </p>
                        <p>
                          <strong>What happened?</strong><br />${data.new_desc[row]}
                        </p>
                        <p>
                          <a target='_blank' href='${data.news_link_1[row]}'>Read more</a>
                        </p>
                      </div>
                  </div>
                  <figure class="col-3@xs col-4@sm col-5@md picture-item picture-item--overlay card" data-groups='["other"]'>
                      <div class="img__wrap popup-open" data-id="popup${count}">
                          <img src="images/${data.photo_path[row]}" class="img__img" />
                          <div class="img__description_layer">
                              <p class="img__description name">${data.name[row]}</p>
                          </div>
                      </div>
                  </figure>`)
            count++;
          }

          // put all slides together
          document.getElementById('grid').innerHTML = output.join('')

            var Shuffle = window.Shuffle;

            class Demo {
            constructor(element) {
                this.element = element;
                this.shuffle = new Shuffle(element, {
                itemSelector: '.picture-item',
                sizer: element.querySelector('.my-sizer-element'),
                });

                // log events
                this.addShuffleEventListeners();
                this._activeFilters = [];
                this.addFilterButtons();
                this.addSorting();
                this.addSearchFilter();
                }

            /**
             * Shuffle uses the CustomEvent constructor to dispatch events. You can listen
             * for them like you normally would (with jQuery for example).
             */
            addShuffleEventListeners() {
                this.shuffle.on(Shuffle.EventType.LAYOUT, (data) => {
                });
                this.shuffle.on(Shuffle.EventType.REMOVED, (data) => {
                });
            }

            addFilterButtons() {
                const options = document.querySelector('.filter-options');
                if (!options) {
                return;
                }
                
                const filterButtons = Array.from(options.children);
                const onClick = this._handleFilterClick.bind(this);
                filterButtons.forEach((button) => {
                button.addEventListener('click', onClick, false);
                });
            }

            _handleFilterClick(evt) {
                const btn = evt.currentTarget;
                const isActive = btn.classList.contains('active');
                const btnGroup = btn.getAttribute('data-group');
                
                this._removeActiveClassFromChildren(btn.parentNode);
                
                let filterGroup;
                if (isActive) {
                btn.classList.remove('active');
                filterGroup = Shuffle.ALL_ITEMS;
                } else {
                btn.classList.add('active');
                filterGroup = btnGroup;
                }
                
                this.shuffle.filter(filterGroup);
            }

            _removeActiveClassFromChildren(parent) {
                const { children } = parent;
                for (let i = children.length - 1; i >= 0; i--) {
                children[i].classList.remove('active');
                }
            }

            addSorting() {
                const buttonGroup = document.querySelector('.sort-options');
                if (!buttonGroup) {
                return;
                }
                buttonGroup.addEventListener('change', this._handleSortChange.bind(this));
            }

            _handleSortChange(evt) {
                // Add and remove `active` class from buttons.
                const buttons = Array.from(evt.currentTarget.children);
                buttons.forEach((button) => {
                if (button.querySelector('input').value === evt.target.value) {
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
                });
                
                // Create the sort options to give to Shuffle.
                const { value } = evt.target;
                let options = {};
                
                function sortByDate(element) {
                return element.getAttribute('data-created');
                }
                
                function sortByTitle(element) {
                return element.getAttribute('data-title').toLowerCase();
                }
                
                if (value === 'date-created') {
                options = {
                    reverse: true,
                    by: sortByDate,
                };
                } else if (value === 'title') {
                options = {
                    by: sortByTitle,
                };
                }
                this.shuffle.sort(options);
            }

            // Advanced filtering
            addSearchFilter() {
                const searchInput = document.querySelector('.js-shuffle-search');
                if (!searchInput) {
                return;
                }
                searchInput.addEventListener('keyup', this._handleSearchKeyup.bind(this));
            }

            /**
             * Filter the shuffle instance by items with a title that matches the search input.
             * @param {Event} evt Event object.
             */
            _handleSearchKeyup(evt) {
                const searchText = evt.target.value.toLowerCase();
                this.shuffle.filter((element, shuffle) => {
                // If there is a current filter applied, ignore elements that don't match it.
                if (shuffle.group !== Shuffle.ALL_ITEMS) {
                    // Get the item's groups.
                    const groups = JSON.parse(element.getAttribute('data-groups'));
                    const isElementInCurrentGroup = groups.indexOf(shuffle.group) !== -1;
                    // Only search elements in the current group
                    if (!isElementInCurrentGroup) {
                    return false;
                    }
                }
                const titleElement = element.querySelector('.img__description');
                const titleText = titleElement.textContent.toLowerCase().trim();
                return titleText.indexOf(searchText) !== -1;
                });
            }
            }

            document.addEventListener('DOMContentLoaded', () => {
            window.demo = new Demo(document.getElementById('grid'));
            });

        </script>

        <script type="text/javascript">
            // event listener on button click
            let modal;
            document.addEventListener("click", (e) => {
            if (e.target.className === "img__wrap popup-open") {
                modal = document.getElementById(e.target.dataset.id);
                openModal(modal);
            } else if (e.target.className === "modal-close") {
                closeModal(modal);
            } else {
                return;
            }
            });

            // open
            const openModal = (modal) => {
                //document.body.style.overflow = "hidden";
                modal.setAttribute("open", "true");
                let overlay = document.createElement("div");
                overlay.id = "modal-overlay";
                document.body.appendChild(overlay);
            };

            // closed
            const closeModal = (modal) => {
                //document.body.style.overflow = "auto";
                modal.removeAttribute("open");
                document.body.removeChild(document.getElementById("modal-overlay"));
            };
        </script>

    </body>
</html>