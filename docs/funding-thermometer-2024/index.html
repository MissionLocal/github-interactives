<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="styles.css">
</head>

<body onload="CountDownTimer('01/01/2025 00:01 AM', 'countdown')">

  <div id='countdown-wrap'>
  
    <!-- <div id="first-graf">Our goal is to raise <span class="bold-text">$200,000 by Dec. 31</span>.</div>
    <div id="middle-graf">Weâ€™ve got $70,000 in matching funds. <span class="bold-text">Will you help us get there?</span></div>
    <div id="last-graf">With <span id="countdown"></span> days left, we are <strong><span id="funded"></span></strong> of the way to our goal.</div> -->

    <div id="glass">
      <div id="progress">
      </div>
    </div>

    <div class="goal-stat-container">
      <div class="goal-stat">
        <span class="goal-number" id="raised" style="float: left;"></span>
        <br />
        <span class="goal-label" style="float: left;">Raised</span>
      </div>
  
      <div class="goal-stat">
        <span class="goal-number" id="goal" style="float: right;"></span>
        <br />
        <span class="goal-label" style="float: right;">Target</span>
      </div>
    </div>

    <div id="copy">
    </div>

    <div class='donate-button-container'>
      <a target="_blank" href="https://missionlocal.org/support-our-publication/">
        <button class="btn">Double my gift</button>
      </a>
    </div>
  </div>

<script type="text/javascript" src="https://pym.nprapps.org/pym.v1.min.js"></script>
<script>

var pymChild = new pym.Child();

// STUFF WE NEED TO CHANGE
// set the amount you've raised here
// Last updated: Nov. 20, 2024

var raised = 70468.00 // funds raised

// set the goal here
var goal = 200000

// set countdown function
    function CountDownTimer(dt, id)
    {
        var end = new Date(dt);

        var _second = 1000;
        var _minute = _second * 60;
        var _hour = _minute * 60;
        var _day = _hour * 24;

        function showRemaining() {
            var now = new Date();
            console.log(now)
            var distance = end - now;
            var days = Math.floor(distance / _day);
            document.getElementById(id).innerHTML = days;
        }

        timer = setInterval(showRemaining, 1 * 1000);
    }

// define funded
var funded = (raised / goal) * 100

// money formatting function
var formatter = new Intl.NumberFormat('en-US', {
  style: 'currency',
  currency: 'USD',
  maximumFractionDigits: 0
});

// update document
document.getElementById("goal").innerHTML = formatter.format(goal);
document.getElementById("raised").innerHTML = formatter.format(raised);
document.getElementById("funded").innerHTML = parseFloat(funded).toFixed(0)+"%";
document.getElementById("progress").style.width = parseFloat(funded).toFixed(0)+"%";

// delay for a bit
function delay(time) {
	return new Promise(resolve => setTimeout(resolve, time));
}
delay(500).then(() => pymChild.sendHeight());

</script>

<!-- With many thanks to Robot Balloon for their original code: https://codepen.io/robotballoon/pen/Fjnyp and to Will Jarrett for making this prototype back in 2022! -->

</body>
</html>
